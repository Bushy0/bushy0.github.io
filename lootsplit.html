<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./lootsplit.css">
    <link rel="icon" href="./images/guildemblem.png" type="image/x-icon">
    <title>Loot Split Calculator | Eikonic</title>
</head>

<body>
    <div class="navbar">
        <a href="/index">Home</a>
        <a href="/gatheringmight">Gathering Might Calculator</a>
        <a href="/lootsplit">Loot Split Calculator</a>
        <a href="/builds">Builds</a>
    </div>
    <h1>Loot Split Calculator</h1>
    <br><br>
    <p>This calculator divides the total evenly after applying the 10% guild tax.</p>
    <label for="splitValue">Value of Split in Silver:</label>
    <input type="text" id="splitValue" value="0" onblur="formatInput(this)">
    <br>


    <label for="peopleInSplit">Number of People in Split (min 2):</label>
    <input type="number" id="peopleInSplit" min="2" value="2" onchange="calculateSplits()"
        oninput="validity.valid||(value='2');">
    <br>

    <h2>Calculated Split:</h2>
    <p><b>10% Guild Tax: </b><span id="moneyForGuild">0</span> Silver</p>
    <p><b>Full Split per Person: </b><span id="fullSplitPerPerson">0</span> Silver</p>

    <script>
        function formatInput(input) {
            let value = input.value.replace(/[^\d]/g, '');
            if (value.length > 0) {
                value = numberWithCommas(value);
            } else {
                value = "0";
            }
            input.value = value;
            calculateSplits();
        }

        function numberWithCommas(x) {
            return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        function calculateSplits() {
            const splitValue = parseFloat(document.getElementById("splitValue").value.replace(/,/g, ""));
            const peopleInSplit = Math.max(2, parseInt(document.getElementById("peopleInSplit").value));
            const guildTax = splitValue * 0.10;

            if (isNaN(splitValue) || isNaN(peopleInSplit)) {
                document.getElementById("fullSplitPerPerson").textContent = "0";
                document.getElementById("moneyForGuild").textContent = "0";
                return;
            }

            const fullSplitPerPerson = Math.floor((splitValue - guildTax) / peopleInSplit);
            const halfSplitPerPerson = Math.floor(fullSplitPerPerson / 2);

            document.getElementById("fullSplitPerPerson").textContent = numberWithCommas(Math.floor(fullSplitPerPerson));
            document.getElementById("moneyForGuild").textContent = numberWithCommas(Math.ceil(guildTax));
        }
    </script>

</body>

</html>